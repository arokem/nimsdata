<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nimsdata &mdash; NIMSData alpha documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="NIMSData alpha documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">NIMSData alpha documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-nimsdata">
<span id="nimsdata"></span><h1><a class="reference internal" href="../nimsdata.html#module-nimsdata" title="nimsdata"><tt class="xref py py-mod docutils literal"><span class="pre">nimsdata</span></tt></a><a class="headerlink" href="#module-nimsdata" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>NIMSData<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>open-source software for converting scientific data from a raw format to some common output.
nimsdata can parse dicoms and write niftis, image montages, or png image files.</p>
<dl class="docutils">
<dt>Provides</dt>
<dd><ol class="first last arabic simple">
<li>data parsing, from dicom, GE raw data. (nifti planned)</li>
<li>data writing, to nifti</li>
<li>other stuff</li>
</ol>
</dd>
</dl>
<div class="section" id="how-to-use-the-documentation">
<h3>How to use the documentation<a class="headerlink" href="#how-to-use-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>Documentation is available as docstrings provided within the code, and
separate <cite>web documentation https://github.com</cite>.  All command line utilities have a -h/&#8211;help flag.</p>
<p>two top level interfaces, nimsdata.parse and nimsdata.write</p>
<p>if you need a semi-vague idea of what a file is, such as it&#8217;s group, experiment and subject
designations, you don&#8217;t NEED to load_data.</p>
<p>However, if you need to manipulate the imagedata, or affine, or anything between reading and writing,
you will need ALL the data before proceeding.  You can either tell parse to load_data=True during parse,
or you can invoke the dataset&#8217;s load_data method.</p>
</div>
<div class="section" id="basic-usage-examples">
<h3>Basic Usage Examples<a class="headerlink" href="#basic-usage-examples" title="Permalink to this headline">¶</a></h3>
<p>dcm to nifti, no reorientation</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">input_tgz</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ignore_json</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;dicom&#39;</span><span class="p">)</span>
<span class="c"># ds, the dataset contains metadata, such as affine info</span>
<span class="c"># ds.data contains np array of pixel data</span>
<span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>dcm to nifti, reorient to &#8216;LAS&#8217;</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">input_tgz</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ignore_json</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;dicom&#39;</span><span class="p">)</span>
<span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">,</span> <span class="n">voxel_order</span><span class="o">=</span><span class="s">&#39;LAS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>dcm to nifti, backward compatible with nimsdata v1 (reorient to &#8216;LPS&#8217;)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">input_tgz</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ignore_json</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;dicom&#39;</span><span class="p">)</span>
<span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">,</span> <span class="n">voxel_order</span><span class="o">=</span><span class="s">&#39;LPS&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-usage-examples">
<h3>Advanced Usage Examples<a class="headerlink" href="#advanced-usage-examples" title="Permalink to this headline">¶</a></h3>
<p>conditional writing, based on pre identified special case</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">input_tgz</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ignore_json</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;dicom&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ds</span><span class="o">.</span><span class="n">is_screenshot</span><span class="p">:</span>
    <span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;png&#39;</span><span class="p">)</span>        <span class="c"># PNG default voxel_order=LPS</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;montage&#39;</span><span class="p">)</span>    <span class="c"># Montage default voxel_order=LPS</span>
    <span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>directly access specific parser and writer</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">nimsdata.nimspng</span>
<span class="kn">import</span> <span class="nn">nimsdata.nimsdicom</span>
<span class="kn">import</span> <span class="nn">nimsdata.nimsnifti</span>
<span class="kn">import</span> <span class="nn">nimsdata.nimsmontage</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">nimsdicom</span><span class="o">.</span><span class="n">NIMSDicom</span><span class="p">(</span><span class="n">input_tgz</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ds</span><span class="o">.</span><span class="n">is_screenshot</span><span class="p">:</span>
    <span class="c"># PNG default voxel_order=LPS</span>
    <span class="n">nimsdata</span><span class="o">.</span><span class="n">nimspng</span><span class="o">.</span><span class="n">NIMSPNG</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c"># Montage default voxel_order=LPS</span>
    <span class="n">nimsdata</span><span class="o">.</span><span class="n">nimsmontage</span><span class="o">.</span><span class="n">NIMSMontage</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">)</span>
    <span class="c"># Nifti default voxel_order=None</span>
    <span class="n">nimsdata</span><span class="o">.</span><span class="n">nimsnifti</span><span class="o">.</span><span class="n">NIMSNifti</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outpath</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">,</span> <span class="n">voxel_order</span><span class="o">=</span><span class="s">&#39;LPS&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nimsdata.NIMSDataError" title="nimsdata.NIMSDataError"><tt class="xref py py-obj docutils literal"><span class="pre">NIMSDataError</span></tt></a>(message[,&nbsp;log_level])</td>
<td>Base class for NIMS exceptions.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../nimsdata.html#nimsdata.parse" title="nimsdata.parse"><tt class="xref py py-obj docutils literal"><span class="pre">parse</span></tt></a>(path[,&nbsp;load_data,&nbsp;ignore_json,&nbsp;filetype])</td>
<td>Infer the type of file at path and parse with type-specific parser.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../nimsdata.html#nimsdata.write" title="nimsdata.write"><tt class="xref py py-obj docutils literal"><span class="pre">write</span></tt></a>(metadata,&nbsp;imagedata,&nbsp;outbase,&nbsp;...)</td>
<td>write the metadata, imagedata, into file outbase, with the specified writer.</td>
</tr>
</tbody>
</table>
<div class="section" id="nimsdataerror">
<h2><a class="reference internal" href="#nimsdata.NIMSDataError" title="nimsdata.NIMSDataError"><tt class="xref py py-class docutils literal"><span class="pre">NIMSDataError</span></tt></a><a class="headerlink" href="#nimsdataerror" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nimsdata.NIMSDataError">
<em class="property">class </em><tt class="descclassname">nimsdata.</tt><tt class="descname">NIMSDataError</tt><big>(</big><em>message</em>, <em>log_level=None</em><big>)</big><a class="headerlink" href="#nimsdata.NIMSDataError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></p>
<p>Base class for NIMS exceptions.</p>
<p>Adds option for logging the Exception message.</p>
<dl class="method">
<dt id="nimsdata.NIMSDataError.__init__">
<tt class="descname">__init__</tt><big>(</big><em>message</em>, <em>log_level=None</em><big>)</big><a class="headerlink" href="#nimsdata.NIMSDataError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>instantiate nimsdataerror exception class.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="parse">
<h2>parse<a class="headerlink" href="#parse" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="nimsdata.parse">
<tt class="descclassname">nimsdata.</tt><tt class="descname">parse</tt><big>(</big><em>path</em>, <em>load_data=False</em>, <em>ignore_json=False</em>, <em>filetype=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/nimsdata.html#parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nimsdata.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer the type of file at path and parse with type-specific parser.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : str</p>
<blockquote>
<div><p>input path</p>
</div></blockquote>
<p><strong>load_data</strong> : bool  [default False]</p>
<blockquote>
<div><p>attempt to load all metadata and data at parse.  like running parse, then load_data</p>
</div></blockquote>
<p><strong>ignore_json</strong> : bool [default False]</p>
<blockquote>
<div><p>True, don&#8217;t look for json file. therefore the parser cannot be read from the json, and
a parser MUST be specfied if ignore_json is true
False, do look for json file.</p>
</div></blockquote>
<p><strong>filetype</strong> : str</p>
<blockquote>
<div><p>string name of parser to use.  no special search or inferences will be made if this
option is specified. if the specified parser does not exist, an error will be raised.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>parser_class</strong> : obj</p>
<blockquote class="last">
<div><p>dataset with data and metadata attributes. this dataset object can be
passed to any writer to complete the conversion process</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="12%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ignore_json</th>
<th class="head">filetype</th>
<th class="head">behavior</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>False</td>
<td>None</td>
<td><strong>DEFAULT</strong> try to read json, use parser from json</td>
</tr>
<tr class="row-odd"><td>False</td>
<td>&#8216;dicom&#8217;</td>
<td>try to read json, use &#8216;dicom&#8217; parser</td>
</tr>
<tr class="row-even"><td>True</td>
<td>None</td>
<td><strong>INVALID</strong></td>
</tr>
<tr class="row-odd"><td>True</td>
<td>&#8216;dicom&#8217;</td>
<td>don&#8217;t try to read json, use &#8216;dicom&#8217; parser</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>convert dicom.tgz to dicoms.nii.gz</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">nimsdata</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;dicoms.tgz&#39;</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;dicom&#39;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outbase</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="write">
<h2>write<a class="headerlink" href="#write" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="nimsdata.write">
<tt class="descclassname">nimsdata.</tt><tt class="descname">write</tt><big>(</big><em>metadata</em>, <em>imagedata</em>, <em>outbase</em>, <em>filetype</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/nimsdata.html#write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nimsdata.write" title="Permalink to this definition">¶</a></dt>
<dd><p>write the metadata, imagedata, into file outbase, with the specified writer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>metadata</strong> : dataset object</p>
<blockquote>
<div><p>dataset from parse</p>
</div></blockquote>
<p><strong>imaedata</strong> : np-array</p>
<blockquote>
<div><p>dataset.imagedata</p>
</div></blockquote>
<p><strong>outbase</strong> : string</p>
<blockquote>
<div><p>base of name to use</p>
</div></blockquote>
<p><strong>filetype</strong> : string</p>
<blockquote>
<div><p>string name of writer to use</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>convert dicom.tgz to dicoms.nii.gz</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">nimsdata</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">nimsdata</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;dicoms.tgz&#39;</span><span class="p">,</span> <span class="n">load_data</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;dicom&#39;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">nimsdata</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">outbase</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s">&#39;nifti&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">nimsdata</span></tt></a><ul>
<li><a class="reference internal" href="#id1">NIMSData</a><ul>
<li><a class="reference internal" href="#how-to-use-the-documentation">How to use the documentation</a></li>
<li><a class="reference internal" href="#basic-usage-examples">Basic Usage Examples</a></li>
<li><a class="reference internal" href="#advanced-usage-examples">Advanced Usage Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nimsdataerror"><tt class="docutils literal"><span class="pre">NIMSDataError</span></tt></a></li>
<li><a class="reference internal" href="#parse">parse</a></li>
<li><a class="reference internal" href="#write">write</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/_templates/nimsdata.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">NIMSData alpha documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Author.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>